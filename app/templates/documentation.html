{% extends "base_template.html" %}
{% block title %}GEOGLOWS ECMWF Streamflow Service{% endblock %}

{% block body %}
  <div id="swagger-ui"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui-bundle.js"> </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui-standalone-preset.js"> </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
  <script>
  window.onload = function() {
    const spec = {"swagger": "2.0", "info": {"title": "GEOGLOWS ECMWF Streamflow Data Service", "description": "A REST Data Service to access high resolution streamflow forecasts from around the world", "version": "2.0.0"}, "host": "geoglows.ecmwf.int", "basePath": "/api/v2", "schemes": ["https", "http"], "paths": {"/hydroviewer/{reach_id}": {"get": {"description": "A shorthand for retrieving the forecast records and stats, and return periods, usually all plotted together.", "summary": "Returns forecast records, forecast stats, and return periods.", "parameters": [{"name": "reach_id", "in": "path", "description": "The stream reach's unique ID also referred to as common identifier (COMID). If the ID is not known, use the getReachID method.", "type": "number", "format": "integer", "required": true}, {"name": "format", "in": "query", "required": false, "description": "The file format of the response", "type": "string", "default": "csv", "enum": ["csv", "json"]}, {"name": "date", "in": "query", "description": "The given date for the forecast of interest given as YYYYMMDD (e.g. 20201020). If left blank it defaults to the most recent date. This API provides access to data within the last 30 days.", "type": "string", "pattern": "^[0-9]{4}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])(.(00|12)|)$"}], "produces": ["text/csv", "application/json"], "responses": {"200": {"description": "The response body will contain a time series along with metadata about the stream reach of interest."}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}, "/forecast/{reach_id}": {"get": {"description": "This operation returns the average of the ensemble forecast.", "summary": "Returns average forecasted flow", "parameters": [{"name": "reach_id", "in": "path", "description": "The stream reach's unique ID also referred to as common identifier (COMID). If the ID is not known, use the getReachID method.", "type": "number", "format": "integer", "required": true}, {"name": "format", "in": "query", "required": false, "description": "The file format of the response", "type": "string", "default": "csv", "enum": ["csv", "json"]}, {"name": "date", "in": "query", "description": "The given date for the forecast of interest given as YYYYMMDD (e.g. 20201020). If left blank it defaults to the most recent date. This API provides access to data within the last 30 days.", "type": "string", "pattern": "^[0-9]{4}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])(.(00|12)|)$"}], "produces": ["text/csv", "application/json"], "responses": {"200": {"description": "The response body will contain a time series along with metadata about the stream reach of interest."}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}, "/forecaststats/{reach_id}": {"get": {"description": "This operation returns statistics calculated from 51 forecast ensemble members. A successful response will return a time series with date-value pairs.", "summary": "Return basic forecast statistics", "parameters": [{"name": "reach_id", "in": "path", "description": "The stream reach's unique ID also referred to as common identifier (COMID). If the ID is not known, use the getReachID method.", "type": "number", "format": "integer", "required": true}, {"name": "format", "in": "query", "required": false, "description": "The file format of the response", "type": "string", "default": "csv", "enum": ["csv", "json"]}, {"name": "date", "in": "query", "description": "The given date for the forecast of interest given as YYYYMMDD (e.g. 20201020). If left blank it defaults to the most recent date. This API provides access to data within the last 30 days.", "type": "string", "pattern": "^[0-9]{4}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])(.(00|12)|)$"}], "produces": ["text/csv", "application/json"], "responses": {"200": {"description": "The response body will contain a time series along with metadata about the stream reach of interest."}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}, "/forecastensembles/{reach_id}": {"get": {"description": "This operation returns a timeseries for each of the 51 normal forecast ensemble members and the 52nd higher resolution forecast. A successful response will return a time series with date-value pairs.", "summary": "Return forecast ensembles", "parameters": [{"name": "reach_id", "in": "path", "description": "The stream reach's unique ID also referred to as common identifier (COMID). If the ID is not known, use the getReachID method.", "type": "number", "format": "integer", "required": true}, {"name": "date", "in": "query", "description": "The given date for the forecast of interest given as YYYYMMDD (e.g. 20201020). If left blank it defaults to the most recent date. This API provides access to data within the last 30 days.", "type": "string", "pattern": "^[0-9]{4}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])(.(00|12)|)$"}, {"name": "ensemble", "in": "query", "description": "The desired forecast ensemble(s). Input can be:\n  - An individual ensemble (i.e. 5)\n  - A group of ensembles separated by commas (i.e. 1,5,9)\n  - A range of ensembles separated by a dash (i.e. 3-15)\n  - A combination of individual numbers and ranges (i.e. 1,5,7-16,24-35)", "type": "string", "default": "all"}, {"name": "format", "in": "query", "required": false, "description": "The file format of the response", "type": "string", "default": "csv", "enum": ["csv", "json"]}], "produces": ["text/csv", "application/json"], "responses": {"200": {"description": "The response body will contain a time series for each ensemble along with metadata about the stream reach of interest."}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}, "/forecastrecords/{reach_id}": {"get": {"description": "This retrieves the rolling record of the mean of the forecasted streamflow during the first 24 hours of each day's forecast. That is, each day day after the\nstreamflow forecasts are computed, the average of first 8 of the 3-hour timesteps are recorded to a csv. This retrives that rolling record", "summary": "Return rolling record of average flows", "parameters": [{"name": "reach_id", "in": "path", "description": "The stream reach's unique ID also referred to as common identifier (COMID). If the ID is not known, use the getReachID method.", "type": "number", "format": "integer", "required": true}, {"name": "start_date", "in": "query", "description": "A date in YYYYMMDD format when you would like to start retrieving data (if available). Defaults to Jan 1 of the current year.", "type": "string", "pattern": "^[0-9]{4}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])$"}, {"name": "end_date", "in": "query", "description": "A date in YYYYMMDD format when you would like to stop retrieving data (if available). Defaults to Dec 31 of the current year.", "type": "string", "pattern": "^[0-9]{4}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])$"}], "produces": ["text/csv", "application/json"], "responses": {"200": {"description": "The response body will contain a time series for the specified stream reach"}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}, "/forecastanomalies/{reach_id}": {"get": {"description": "Computes the deviations from the daily averages", "summary": "Calculates the differences between the daily average and the forecasted flow for each day", "parameters": [{"name": "reach_id", "in": "path", "description": "The stream reach's unique ID also referred to as common identifier (COMID). If the ID is not known, use the getReachID method.", "type": "number", "format": "integer", "required": true}, {"name": "start_date", "in": "query", "description": "A date in YYYYMMDD format when you would like to start retrieving data (if available). Defaults to Jan 1 of the current year.", "type": "string", "pattern": "^[0-9]{4}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])$"}, {"name": "end_date", "in": "query", "description": "A date in YYYYMMDD format when you would like to stop retrieving data (if available). Defaults to Dec 31 of the current year.", "type": "string", "pattern": "^[0-9]{4}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])$"}], "produces": ["text/csv", "application/json"], "responses": {"200": {"description": "The response body will contain a time series for the specified stream reach"}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}, "/forecastwarnings/{return_format}": {"get": {"description": "This method returns a csv created to summarize the potential return period level flow events coming to the reaches in a specified region. The CSV contains a column for the reach_id, lat of the reach, lon of the reach, maximum forecasted flow in the next 15 day forecast, and a column for each of the return periods (2, 10, 20, 25, 50, 100) which will contain the date when the forecast is first expected to pass that threshold.", "summary": "Returns potential warnings for the forecast", "parameters": [{"name": "region", "in": "path", "description": "the name of one of the regions that the streamflow forecasts are generated for. You can find this with the AvailableRegions method.", "type": "string", "default": "all", "required": true}, {"name": "forecast_date", "in": "query", "description": "If multiple forecast dates are available, provide the date in the format YYYYMMDD.HH of the forecast you would like to query. Use the AvailableDates method if you need to find out which dates are available. Defaults to the most recent available data.", "type": "string", "format": "string"}, {"name": "format", "in": "query", "required": false, "description": "The file format of the response", "type": "string", "default": "csv", "enum": ["csv", "json"]}], "produces": ["text/csv", "application/json"], "responses": {"200": {"description": "The response body will contain a csv table with the information previous mentioned."}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region or both lat and lon are required as input"}}}}}, "/dates": {"get": {"description": "This operation returns the available forecast dates in JSON format.", "summary": "Available dates", "produces": ["application/json"], "responses": {"200": {"description": "The response body will contain a list of available dates."}, "204": {"description": "Succesful request but no regions found.", "examples": {"message": "No dates available."}}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}, "/retrospective/{reach_id}": {"get": {"description": "This operation returns simulated streamflow data based on the ERA-5 dataset. A successful response will return a time series with date-value pairs.", "summary": "Return historic simulation", "parameters": [{"name": "reach_id", "in": "path", "description": "The stream reach's unique ID also referred to as common identifier (COMID). If the ID is not known, use the getReachID method.", "type": "number", "format": "integer", "required": true}, {"name": "format", "in": "query", "required": false, "description": "The file format of the response", "type": "string", "default": "csv", "enum": ["csv", "json"]}], "produces": ["text/csv", "application/json"], "responses": {"200": {"description": "The response body will contain a time series along with metadata about the stream reach of interest."}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}, "/dailyaverages/{reach_id}": {"get": {"description": "This operation returns the average flow for each day of the year for the Historic Simulation", "summary": "Return historic simulation's daily averages", "parameters": [{"name": "reach_id", "in": "path", "description": "The stream reach's unique ID also referred to as common identifier (COMID). If the ID is not known, use the getReachID method.", "type": "number", "format": "integer", "required": true}, {"name": "format", "in": "query", "required": false, "description": "The file format of the response", "type": "string", "default": "csv", "enum": ["csv", "json"]}], "produces": ["text/csv", "application/json"], "responses": {"200": {"description": "The response body will contain a time series along with metadata about the stream reach of interest."}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}, "/monthlyaverages/{reach_id}": {"get": {"description": "This operation returns the average flow for each month of the year for the Historic Simulation", "summary": "Return historic simulation's monthly averages", "parameters": [{"name": "reach_id", "in": "path", "description": "The stream reach's unique ID also referred to as common identifier (COMID). If the ID is not known, use the getReachID method.", "type": "number", "format": "integer", "required": true}, {"name": "format", "in": "query", "required": false, "description": "The file format of the response", "type": "string", "default": "csv", "enum": ["csv", "json"]}], "produces": ["text/csv", "application/json"], "responses": {"200": {"description": "The response body will contain a time series along with metadata about the stream reach of interest."}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}, "/returnperiods/{reach_id}": {"get": {"description": "This operation returns the 2, 5, 10, 25, 50, and 100 year return period based on the 80-years simulated streamflow data and using the Gumbel Method. A successful response will return key-value pairs for earch return period along with metadata.", "summary": "Return historic simulation", "parameters": [{"name": "reach_id", "in": "path", "description": "The stream reach's unique ID also referred to as common identifier (COMID). If the ID is not known, use the getReachID method.", "type": "number", "format": "integer", "required": true}, {"name": "format", "in": "query", "required": false, "description": "The file format of the response", "type": "string", "default": "csv", "enum": ["csv", "json"]}], "produces": ["text/csv", "application/json"], "responses": {"200": {"description": "The response body will contain a key-value pairs for each return period along with metadata about the stream reach of interest."}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}, "/getReachID": {"get": {"description": "Find the Reach ID nearest a point using latitude and longitude coordinates", "summary": "Find the Reach ID nearest a point using latitude and longitude coordinates", "parameters": [{"name": "lat", "in": "query", "required": true, "description": "The latitude of a point to search", "type": "number", "format": "float"}, {"name": "lon", "in": "query", "required": true, "description": "The longitude of a point to search", "type": "number", "format": "float"}], "produces": ["application/json"], "responses": {"200": {"description": null}, "400": {"description": "Bad request. Check request and paramaters.", "examples": {"error": "An unexpected error occured."}}, "422": {"description": "Missing a required parameter.", "examples": {"error": "region is required as input."}}}}}}};
    // Build a system
    const ui = SwaggerUIBundle({
      spec: spec,
      dom_id: '#swagger-ui',
      deepLinking: true,
      presets: [
        SwaggerUIBundle.presets.apis,
        SwaggerUIStandalonePreset
      ],
      plugins: [
        SwaggerUIBundle.plugins.DownloadUrl
      ],
      layout: "StandaloneLayout"
    })
    window.ui = ui

    var elements = document.getElementsByClassName("topbar");
    while(elements.length > 0){
      elements[0].parentNode.removeChild(elements[0]);
    }
  }
  </script>
{% endblock %}

{% block stylesheets %}
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro:300,600|Titillium+Web:400,600,700" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui.css" >
  <style>
    html
    {
      box-sizing: border-box;
      overflow-y: scroll;
    }
    *,
    *:before,
    *:after
    {
      box-sizing: inherit;
    }
    body {
      margin:0;
      background: #fafafa;
    }
  </style>
{% endblock %}
